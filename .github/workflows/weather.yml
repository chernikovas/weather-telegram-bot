name: Daily Weather Bot

on:
  # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 08:00 –ø–æ –ú–°–ö (05:00 UTC)
  schedule:
    - cron: '0 5 * * *'
  
  # –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ GitHub
  workflow_dispatch:

jobs:
  send-weather:
    runs-on: ubuntu-latest
    
    steps:
    # 1. –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
    - name: üì• –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–¥
      uses: actions/checkout@v3
    
    # 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python
    - name: üêç –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    # 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
    - name: üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    # 4. –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
    - name: üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –ø–æ–≥–æ–¥—ã
      env:
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
        USER_ID: ${{ secrets.USER_ID }}
        OPENWEATHER_API_KEY: ${{ secrets.OPENWEATHER_API_KEY }}
        LATITUDE: ${{ secrets.LATITUDE }}
        LONGITUDE: ${{ secrets.LONGITUDE }}
      run: python github_bot.py
